# Consulta de Préstamo por ID (nivel administrador)

Este endpoint permite obtener los detalles de un préstamo específico mediante su identificador único.

## Endpoint

`GET /v1/loans/apps/loan/:loan_id`

## Requisitos de Acceso

- **Scope necesario:** `admin:`
- **Autenticación:** Se requiere un token Bearer válido.

Incluye el encabezado `Authorization` en tu solicitud:

```http
Authorization: Bearer <tu_token>
```

Asegúrate de reemplazar `<tu_token>` con un token válido. Para obtener un token, consulta la guía de [autenticación](/docs/authentication/).

## Parámetros

### URL Parameters

**loan_id:** El identificador único del crédito a consultar.

## Ejemplos de Llamadas

### Usando cURL

```bash
curl -X GET \
  {base_url}/v1/loans/apps/loan/{loan_id} \
  -H "Authorization: Bearer YOUR_ACCESS_TOKEN" \
  -H "Content-Type: application/json"
```

### Usando Node.js

```javascript
import fetch from "node-fetch";

async function getLoanById(token, loan_id) {
  const response = await fetch(`${base_url}/v1/loans/apps/loan/${loan_id}`, {
    method: "GET",
    headers: {
      Authorization: `Bearer ${token}`,
      "Content-Type": "application/json",
    },
  });

  if (!response.ok) {
    throw new Error(`Error fetching loan: ${response.statusText}`);
  }

  const data = await response.json();
  console.log(data);
}

// Ejemplo de uso
const token = "YOUR_ACCESS_TOKEN";
const loan_id = "018c0f5b-4d4b-7bde-89a6-6f2a4d60f56e";
getLoanById(token, loan_id).catch(console.error);
```

## Respuesta

La respuesta incluye una lista de cuotas asociadas al préstamo especificado y su paginación.

### Estructura de Respuesta

```json
{
  "success": true,
  "data": {
    "id": "018c0f5b-4d4b-7bde-89a6-6f2a4d60f56e",
    "user_id": "01f4c5d9-3b6f-7e4a-93b6-2f1a3c50d78f",
    "application_id": "02f4c5d9-3b6f-7e4a-93b6-2f1a3c50d78f",
    "product_id": "03f4c5d9-3b6f-7e4a-93b6-2f1a3c50d78f",
    "currency_id": "ARS",
    "requested_amount": 50000.0,
    "interest_rate": 10.5,
    "penalty_rate": 3.0,
    "bonus_amount": 5000.0,
    "bonus_percentage": 10.0,
    "total_amount": 55000.0,
    "paid_amount": 20000.0,
    "balance": 35000.0,
    "installment_quantity": 12,
    "requested_date": "2024-01-01T00:00:00Z",
    "approved_date": "2024-01-05T00:00:00Z",
    "credited_date": "2024-01-10T00:00:00Z",
    "last_payment_date": "2024-02-01T00:00:00Z",
    "fully_paid_date": null,
    "status_id": "approved",
    "other_info": null,
    "installments": [
      // Detalles de las cuotas
    ],
    "bonus_conditions": [
      // Condiciones del bono
    ],
    "audit_logs": [
      // Registros de auditoría
    ],
    "product": {
      // Detalles del producto asociado al crédito
    },
    "status": {
      // Estado del crédito
    }
  },
  "pagination": null,
  "error": null
}
```

### Detalles de los Campos

### Campos Principales

- **success:** Indica si la solicitud fue exitosa.
- **data:** Lista de préstamos del usuario autenticado.
- **error:** Detalles del error (si existe).
- **pagination:** Información de paginación.

### Campos de un Credito

- **id:** Identificador único del préstamo.
- **user_id:** Identificador único del usuario asociado al préstamo.
- **application_id:** Identificador de la aplicación asociada.
- **product_id:** Identificador del producto financiero asociado.
- **currency_id:** Identificador de la moneda del préstamo.
- **requested_amount:** Monto solicitado por el usuario.
- **interest_rate:** Tasa de interés aplicada al préstamo.
- **penalty_rate:** Tasa de penalización por incumplimiento.
- **bonus_amount:** Monto del bono asociado al préstamo.
- **bonus_percentage:** Porcentaje del bono sobre el préstamo.
- **total_amount:** Monto total del préstamo, incluyendo intereses y bonos.
- **paid_amount:** Monto pagado hasta el momento.
- **balance:** Saldo pendiente del préstamo.
- **installment_quantity:** Cantidad total de cuotas del préstamo.
- **requested_date:** Fecha en la que se solicitó el préstamo.
- **approved_date:** Fecha en la que se aprobó el préstamo.
- **credited_date:** Fecha en la que se acreditaron los fondos.
- **last_payment_date:** Fecha del último pago realizado.
- **fully_paid_date:** Fecha en la que se completó el pago del préstamo (si aplica).
- **status:** Información del estado actual del préstamo:
  - **id:** Identificador único del estado (e.g., `in_course`).
  - **name:** Nombre descriptivo del estado.
  - **description:** Descripción del estado.
- **installments:** Lista de cuotas asociadas al crédito.
- **bonus_conditions:** Condiciones aplicables al bono otorgado.
- **audit_logs:** Registros de auditoría relacionados con el crédito.
- **product:** Detalles del producto asociado al crédito.

### Relaciones

#### Cuotas

- **id:** Identificador único de la cuota.
- **due_date:** Fecha de vencimiento de la cuota.
- **due_amount:** Monto debido para la cuota.
- **paid_amount:** Monto pagado para la cuota.
- **balance:** Saldo pendiente de la cuota.
- **number:** Número de la cuota.
- **status:** Información del estado actual de la cuota:
  - **id:** Identificador único del estado (e.g., `pending`).
  - **name:** Nombre descriptivo del estado.
  - **description:** Descripción del estado.

#### Bonus Conditions

- **id:** Identificador único de la condición.
- **application_id:** Identificador único de la aplicación asociada.
- **name:** Nombre descriptivo de la condición de bonificación.
- **description:** Descripción detallada de la condición.
- **other_info:** Información adicional relacionada con la condición.

#### Audit Logs

- **id:** Identificador único del registro de auditoría.
- **loan_id:** Identificador único del préstamo asociado al registro.
- **user_id:** Identificador único del usuario que realizó la acción (puede ser `null`).
- **action_id:** Identificador único de la acción realizada.
- **action_date:** Fecha en la que se realizó la acción.
- **data:** Información adicional sobre la acción.

#### Product

- **id:** Identificador único del producto.
- **application_id:** Identificador único de la aplicación asociada al producto.
- **name:** Nombre descriptivo del producto.
- **primary_color:** Color principal del producto en formato hexadecimal.
- **secondary_color:** Color secundario del producto en formato hexadecimal.
- **description:** Descripción del producto.
- **image_url:** URL de la imagen asociada al producto (puede ser `null`).
- **slogan:** Eslogan promocional del producto.
- **currency_id:** Moneda utilizada por el producto (e.j., `USD`).
- **category_id:** Identificador único de la categoría del producto.
- **status_id:** Identificador único del estado del producto.
- **other_info:** Información adicional relacionada con el producto.
