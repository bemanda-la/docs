# Consulta de Usuarios Morosos

Este endpoint permite obtener la lista de usuarios morosos asociados a una aplicación específica. La información incluye detalles del usuario y su situación respecto a los pagos pendientes.

### Endpoint

`GET /v1/apps/loans/arrear`

### Requisitos de Acceso

- **Scope necesario**: `admin`
- **Autenticación**: Se requiere un token Bearer válido. Incluye el encabezado `Authorization` en tu solicitud:

```http
Authorization: Bearer <tu_token>
```

Asegúrate de reemplazar `<tu_token>` con un token válido. Para obtener un token, consulta la guía de [autenticación](/docs/authentication/).

## Parámetros

### Query Parameters

- **page** (opcional): Número de página a consultar (por defecto `1`).
- **items_per_page** (opcional): Cantidad de elementos por página (por defecto `10`).

## Ejemplos de Llamadas

### Usando cURL

```bash
curl -X GET \
  {base_url}/v1/apps/loans/arrear?page=1&items_per_page=10 \
  -H "Authorization: Bearer YOUR_ACCESS_TOKEN" \
  -H "Content-Type: application/json"

```

### Usando Node.js

```javascript
import fetch from "node-fetch";

async function getDelinquentUsers(token, page = 1, itemsPerPage = 10) {
  const response = await fetch(
    `${base_url}/v1/apps/loans/arrear?page=${page}&items_per_page=${itemsPerPage}`,
    {
      method: "GET",
      headers: {
        Authorization: `Bearer ${token}`,
        "Content-Type": "application/json",
      },
    }
  );

  if (!response.ok) {
    throw new Error(`Error fetching delinquent users: ${response.statusText}`);
  }

  const data = await response.json();
  console.log(data);
}

// Ejemplo de uso
const token = "YOUR_ACCESS_TOKEN";
getDelinquentUsers(token).catch(console.error);
```

## Respuesta

La respuesta incluye una lista de usuarios morosos y la información de paginación.

### Estructura de Respuesta

```json
{
  "success": true,
  "data": [
    {
      "user_id": "12345",
      "name": "Juan Pérez",
      "total_owed": "1000.00",
      "number_of_installments_due": 3,
      "days_late": 45
    },
    {
      "user_id": "67890",
      "name": "Ana Gómez",
      "total_owed": "500.00",
      "number_of_installments_due": 2,
      "days_late": 30
    }
  ],
  "error": null,
  "pagination": {
    "page": 1,
    "items_per_page": 10,
    "total_items": 20,
    "total_pages": 2
  }
}
```

### Detalles de los Campos

### Campos Principales

- **success:** Indica si la solicitud fue exitosa.
- **data:** Lista de préstamos del usuario autenticado.
- **error:** Detalles del error (si existe).
- **pagination:** Información de paginación.

### Campos de un Usuario Moroso

- **user_id:** Identificador del usuario moroso.
- **name:** Nombre del usuario.
- **total_owed:** Monto total adeudado por el usuario.
- **number_of_installments_due:** Número de cuotas pendientes de pago.
- **days_late:** Número de días de retraso en el pago.
