# Autenticación

## Introducción

La autenticación en la API de Manda se basa en el protocolo OAuth 2.0, lo que garantiza un acceso seguro y controlado a los recursos disponibles. Mediante este sistema, las aplicaciones pueden obtener tokens de acceso que deben incluirse en cada solicitud HTTP a la API.

OAuth 2.0 permite que las empresas gestionen de manera eficiente los permisos y el acceso a los diferentes servicios de Manda, protegiendo así la información sensible y asegurando que solo las aplicaciones autorizadas puedan interactuar con la API.

## Flujo de Autenticación

El proceso de autenticación sigue el flujo de credenciales de cliente (`client_credentials`), ideal para aplicaciones que necesitan acceso directo a sus propios recursos sin la intervención de un usuario final.

### Pasos para obtener un token de acceso

1. **Registro de la aplicación**: El cliente debe registrar su aplicación en el panel de control de Manda para obtener un `client_id` y `client_secret`.
2. **Solicitud del token**: Se realiza una petición POST al endpoint de autenticación con las credenciales obtenidas.
3. **Recepción del token**: Si las credenciales son válidas, se devuelve un token de acceso que tendrá una validez limitada.

## Endpoint de Autenticación

**URL del endpoint:**
```
POST /v1/oauth/token
```

**Encabezados Requeridos:**
```
Content-Type: application/x-www-form-urlencoded
```

**Parámetros:**
| Nombre | Tipo | Descripción |
| --- | --- | --- |
| `client_id` | `string` | Identificador de la aplicación. |
| `client_secret` | `string` | Clave secreta de la aplicación. |
| `grant_type` | `string` | Debe ser `client_credentials`. |

### Ejemplo de Solicitud

```bash
curl -X POST \
  {url_base}/v1/oauth/token \
  -H 'Content-Type: application/x-www-form-urlencoded' \
  -d 'client_id=YOUR_CLIENT_ID&client_secret=YOUR_CLIENT_SECRET&grant_type=client_credentials'
```

### Respuesta Esperada

```json
{
  "access_token": "eyJhbGciOiJIUzI1NiIsInR5...",
  "token_type": "Bearer",
  "expires_in": 3600
}
```

## Manejo de Errores

Si la solicitud de autenticación falla, se devuelve una respuesta con un código de error y una descripción detallada. Los errores más comunes incluyen credenciales inválidas o solicitudes mal formadas.

**Ejemplo de Error:**
```json
{
  "error": "invalid_client",
  "error_description": "Client authentication failed"
}
```

Asegúrese de revisar cuidadosamente las credenciales y el formato de la solicitud antes de reenviarla.

