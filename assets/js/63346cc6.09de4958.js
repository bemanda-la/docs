"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[493],{6996:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>t,contentTitle:()=>d,default:()=>h,frontMatter:()=>l,metadata:()=>o,toc:()=>c});const o=JSON.parse('{"id":"webhooks/handle-webhooks","title":"Endpoints: Webhooks","description":"Esta secci\xf3n detalla el funcionamiento y uso de los endpoints relacionados con webhooks en nuestra API. Los webhooks permiten la recepci\xf3n de notificaciones en tiempo real sobre eventos relevantes en nuestra plataforma. A continuaci\xf3n, se describen los diferentes endpoints y sus prop\xf3sitos.","source":"@site/docs/webhooks/handle-webhooks.mdx","sourceDirName":"webhooks","slug":"/webhooks/handle-webhooks","permalink":"/docs/webhooks/handle-webhooks","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"guides","previous":{"title":"Introducci\xf3n a Webhooks","permalink":"/docs/webhooks/"},"next":{"title":"Documentaci\xf3n de Eventos de Webhooks","permalink":"/docs/webhooks/events"}}');var r=s(4848),i=s(8453);const l={},d="Endpoints: Webhooks",t={},c=[{value:"<strong>Estados de los webhooks</strong>",id:"estados-de-los-webhooks",level:2},{value:"<strong>1. Obtener todos los webhooks</strong>",id:"1-obtener-todos-los-webhooks",level:2},{value:"<strong>Endpoint</strong>",id:"endpoint",level:3},{value:"<strong>Descripci\xf3n</strong>",id:"descripci\xf3n",level:3},{value:"<strong>Ejemplo de solicitud</strong>",id:"ejemplo-de-solicitud",level:3},{value:"<strong>Ejemplo de respuesta</strong>",id:"ejemplo-de-respuesta",level:3},{value:"<strong>2. Crear un webhook</strong>",id:"2-crear-un-webhook",level:2},{value:"<strong>Endpoint</strong>",id:"endpoint-1",level:3},{value:"<strong>Descripci\xf3n</strong>",id:"descripci\xf3n-1",level:3},{value:"<strong>Body de la solicitud</strong>",id:"body-de-la-solicitud",level:3},{value:"<strong>Ejemplo de respuesta</strong>",id:"ejemplo-de-respuesta-1",level:3},{value:"<strong>Validaciones</strong>",id:"validaciones",level:3},{value:"<strong>3. Reintentar el challenge de un webhook</strong>",id:"3-reintentar-el-challenge-de-un-webhook",level:2},{value:"<strong>Endpoint</strong>",id:"endpoint-2",level:3},{value:"<strong>Descripci\xf3n</strong>",id:"descripci\xf3n-2",level:3},{value:"<strong>Par\xe1metro de ruta</strong>",id:"par\xe1metro-de-ruta",level:3},{value:"<strong>Ejemplo de solicitud</strong>",id:"ejemplo-de-solicitud-1",level:3},{value:"<strong>Ejemplo de respuesta</strong>",id:"ejemplo-de-respuesta-2",level:3},{value:"<strong>Errores posibles</strong>",id:"errores-posibles",level:3},{value:"<strong>4. Reactivar un webhook pausado</strong>",id:"4-reactivar-un-webhook-pausado",level:2},{value:"<strong>Endpoint</strong>",id:"endpoint-3",level:3},{value:"<strong>Descripci\xf3n</strong>",id:"descripci\xf3n-3",level:3},{value:"<strong>Par\xe1metro de ruta</strong>",id:"par\xe1metro-de-ruta-1",level:3},{value:"<strong>Ejemplo de solicitud</strong>",id:"ejemplo-de-solicitud-2",level:3},{value:"<strong>Ejemplo de respuesta</strong>",id:"ejemplo-de-respuesta-3",level:3},{value:"<strong>Errores posibles</strong>",id:"errores-posibles-1",level:3},{value:"<strong>5. Eliminar un webhook</strong>",id:"5-eliminar-un-webhook",level:2},{value:"<strong>Endpoint</strong>",id:"endpoint-4",level:3},{value:"<strong>Descripci\xf3n</strong>",id:"descripci\xf3n-4",level:3},{value:"<strong>Par\xe1metro de ruta</strong>",id:"par\xe1metro-de-ruta-2",level:3},{value:"<strong>Ejemplo de solicitud</strong>",id:"ejemplo-de-solicitud-3",level:3},{value:"<strong>Ejemplo de respuesta</strong>",id:"ejemplo-de-respuesta-4",level:3},{value:"<strong>Errores posibles</strong>",id:"errores-posibles-2",level:3},{value:"<strong>6. Mejoras y mejores pr\xe1cticas para los webhooks</strong>",id:"6-mejoras-y-mejores-pr\xe1cticas-para-los-webhooks",level:2}];function a(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"endpoints-webhooks",children:"Endpoints: Webhooks"})}),"\n",(0,r.jsx)(n.p,{children:"Esta secci\xf3n detalla el funcionamiento y uso de los endpoints relacionados con webhooks en nuestra API. Los webhooks permiten la recepci\xf3n de notificaciones en tiempo real sobre eventos relevantes en nuestra plataforma. A continuaci\xf3n, se describen los diferentes endpoints y sus prop\xf3sitos."}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"estados-de-los-webhooks",children:(0,r.jsx)(n.strong,{children:"Estados de los webhooks"})}),"\n",(0,r.jsx)(n.p,{children:"Los webhooks pueden estar en uno de los siguientes estados:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"ACTIVE"}),": Son los webhooks que est\xe1n activos y funcionando correctamente."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"PAUSED"}),": Webhooks pausados debido a errores al intentar ejecutar las solicitudes hacia su URL configurada."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"PENDING"}),": Webhooks que a\xfan no han pasado el proceso de verificaci\xf3n (challenge)."]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"1-obtener-todos-los-webhooks",children:(0,r.jsx)(n.strong,{children:"1. Obtener todos los webhooks"})}),"\n",(0,r.jsx)(n.h3,{id:"endpoint",children:(0,r.jsx)(n.strong,{children:"Endpoint"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"GET /webhooks"})}),"\n",(0,r.jsx)(n.h3,{id:"descripci\xf3n",children:(0,r.jsx)(n.strong,{children:"Descripci\xf3n"})}),"\n",(0,r.jsx)(n.p,{children:"Este endpoint devuelve una lista de todos los webhooks registrados en tu cuenta."}),"\n",(0,r.jsx)(n.h3,{id:"ejemplo-de-solicitud",children:(0,r.jsx)(n.strong,{children:"Ejemplo de solicitud"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-http",children:"GET /webhooks HTTP/1.1\nHost: api.example.com\nAuthorization: Bearer <token>\n"})}),"\n",(0,r.jsx)(n.h3,{id:"ejemplo-de-respuesta",children:(0,r.jsx)(n.strong,{children:"Ejemplo de respuesta"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "success": true,\n  "data": [\n    {\n      "id": "12345",\n      "url": "https://example.com/webhook",\n      "events": ["user.create", "loan.create"],\n      "status": "ACTIVE",\n      "created_at": "2025-01-27T10:00:00Z"\n    },\n    {\n      "id": "67890",\n      "url": "https://example.com/webhook2",\n      "events": ["user.update"],\n      "status": "PAUSED",\n      "created_at": "2025-01-26T14:30:00Z"\n    }\n  ]\n}\n'})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"2-crear-un-webhook",children:(0,r.jsx)(n.strong,{children:"2. Crear un webhook"})}),"\n",(0,r.jsx)(n.h3,{id:"endpoint-1",children:(0,r.jsx)(n.strong,{children:"Endpoint"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"POST /webhooks"})}),"\n",(0,r.jsx)(n.h3,{id:"descripci\xf3n-1",children:(0,r.jsx)(n.strong,{children:"Descripci\xf3n"})}),"\n",(0,r.jsxs)(n.p,{children:["Registra un nuevo webhook especificando la URL de destino, los eventos a los que deseas suscribirte y un secreto para la validaci\xf3n de firmas. ",(0,r.jsx)(n.a,{href:"/docs/webhooks/handle-webhooks",children:"Validaci\xf3n de firmas"})]}),"\n",(0,r.jsx)(n.h3,{id:"body-de-la-solicitud",children:(0,r.jsx)(n.strong,{children:"Body de la solicitud"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "url": "https://example.com/webhook",\n  "events": ["user.create", "loan.create"],\n  "secret": "my-secret-key"\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"ejemplo-de-respuesta-1",children:(0,r.jsx)(n.strong,{children:"Ejemplo de respuesta"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "success": true,\n  "data": {\n    "id": "12345",\n    "url": "https://example.com/webhook",\n    "events": ["user.create", "loan.create"],\n    "status": "PENDING",\n    "created_at": "2025-01-27T10:00:00Z"\n  }\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"validaciones",children:(0,r.jsx)(n.strong,{children:"Validaciones"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"La URL debe ser v\xe1lida y accesible."}),"\n",(0,r.jsxs)(n.li,{children:["El array ",(0,r.jsx)(n.code,{children:"events"})," debe contener al menos un evento v\xe1lido."]}),"\n",(0,r.jsxs)(n.li,{children:["El campo ",(0,r.jsx)(n.code,{children:"secret"})," es obligatorio y debe ser un string no vac\xedo."]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"3-reintentar-el-challenge-de-un-webhook",children:(0,r.jsx)(n.strong,{children:"3. Reintentar el challenge de un webhook"})}),"\n",(0,r.jsx)(n.h3,{id:"endpoint-2",children:(0,r.jsx)(n.strong,{children:"Endpoint"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"POST /webhooks/:id/retry-challenge"})}),"\n",(0,r.jsx)(n.h3,{id:"descripci\xf3n-2",children:(0,r.jsx)(n.strong,{children:"Descripci\xf3n"})}),"\n",(0,r.jsx)(n.p,{children:"Reintenta el env\xedo del challenge a la URL del webhook para verificar que sea accesible y v\xe1lido."}),"\n",(0,r.jsx)(n.h3,{id:"par\xe1metro-de-ruta",children:(0,r.jsx)(n.strong,{children:"Par\xe1metro de ruta"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"}),": Identificador \xfanico del webhook."]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"ejemplo-de-solicitud-1",children:(0,r.jsx)(n.strong,{children:"Ejemplo de solicitud"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-http",children:"POST /webhooks/12345/retry-challenge HTTP/1.1\nHost: api.example.com\nAuthorization: Bearer <token>\n"})}),"\n",(0,r.jsx)(n.h3,{id:"ejemplo-de-respuesta-2",children:(0,r.jsx)(n.strong,{children:"Ejemplo de respuesta"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "success": true,\n  "message": "Challenge reenviado exitosamente."\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"errores-posibles",children:(0,r.jsx)(n.strong,{children:"Errores posibles"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"404 Not Found"}),": Si el webhook con el ID especificado no existe."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"400 Bad Request"}),": Si la URL del webhook no responde correctamente al challenge."]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"4-reactivar-un-webhook-pausado",children:(0,r.jsx)(n.strong,{children:"4. Reactivar un webhook pausado"})}),"\n",(0,r.jsx)(n.h3,{id:"endpoint-3",children:(0,r.jsx)(n.strong,{children:"Endpoint"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"POST /webhooks/:id/resume"})}),"\n",(0,r.jsx)(n.h3,{id:"descripci\xf3n-3",children:(0,r.jsx)(n.strong,{children:"Descripci\xf3n"})}),"\n",(0,r.jsxs)(n.p,{children:["Cambia el estado de un webhook de ",(0,r.jsx)(n.code,{children:"PAUSED"})," a ",(0,r.jsx)(n.code,{children:"ACTIVE"}),"."]}),"\n",(0,r.jsx)(n.h3,{id:"par\xe1metro-de-ruta-1",children:(0,r.jsx)(n.strong,{children:"Par\xe1metro de ruta"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"}),": Identificador \xfanico del webhook."]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"ejemplo-de-solicitud-2",children:(0,r.jsx)(n.strong,{children:"Ejemplo de solicitud"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-http",children:"POST /webhooks/12345/resume HTTP/1.1\nHost: api.example.com\nAuthorization: Bearer <token>\n"})}),"\n",(0,r.jsx)(n.h3,{id:"ejemplo-de-respuesta-3",children:(0,r.jsx)(n.strong,{children:"Ejemplo de respuesta"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "success": true,\n  "message": "Webhook reactivado exitosamente."\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"errores-posibles-1",children:(0,r.jsx)(n.strong,{children:"Errores posibles"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"404 Not Found"}),": Si el webhook con el ID especificado no existe."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"400 Bad Request"}),": Si el webhook no est\xe1 en estado ",(0,r.jsx)(n.code,{children:"PAUSED"}),"."]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"5-eliminar-un-webhook",children:(0,r.jsx)(n.strong,{children:"5. Eliminar un webhook"})}),"\n",(0,r.jsx)(n.h3,{id:"endpoint-4",children:(0,r.jsx)(n.strong,{children:"Endpoint"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"DELETE /webhooks/:id"})}),"\n",(0,r.jsx)(n.h3,{id:"descripci\xf3n-4",children:(0,r.jsx)(n.strong,{children:"Descripci\xf3n"})}),"\n",(0,r.jsx)(n.p,{children:"Elimina un webhook por su ID."}),"\n",(0,r.jsx)(n.h3,{id:"par\xe1metro-de-ruta-2",children:(0,r.jsx)(n.strong,{children:"Par\xe1metro de ruta"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"}),": Identificador \xfanico del webhook."]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"ejemplo-de-solicitud-3",children:(0,r.jsx)(n.strong,{children:"Ejemplo de solicitud"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-http",children:"DELETE /webhooks/12345 HTTP/1.1\nHost: api.example.com\nAuthorization: Bearer <token>\n"})}),"\n",(0,r.jsx)(n.h3,{id:"ejemplo-de-respuesta-4",children:(0,r.jsx)(n.strong,{children:"Ejemplo de respuesta"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "success": true,\n  "message": "Webhook eliminado exitosamente."\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"errores-posibles-2",children:(0,r.jsx)(n.strong,{children:"Errores posibles"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"404 Not Found"}),": Si el webhook con el ID especificado no existe."]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"6-mejoras-y-mejores-pr\xe1cticas-para-los-webhooks",children:(0,r.jsx)(n.strong,{children:"6. Mejoras y mejores pr\xe1cticas para los webhooks"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Verificaciones previas:"})," Antes de reintentar un challenge o reactivar un webhook, valida que el estado actual permita la operaci\xf3n."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Logs detallados:"})," Registra todos los intentos de reintento o reactivaci\xf3n para facilitar la depuraci\xf3n."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Uso de HTTPS:"})," Aseg\xfarate de que las URLs configuradas para los webhooks utilicen HTTPS para proteger la comunicaci\xf3n."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Tiempo de respuesta:"})," Dise\xf1a tu sistema para responder a las solicitudes de webhooks en menos de 5 segundos."]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsxs)(n.p,{children:["Para m\xe1s informaci\xf3n sobre c\xf3mo configurar los webhooks y sus validaciones, consulta nuestra ",(0,r.jsx)(n.a,{href:"/docs/webhooks/",children:"gu\xeda principal de webhooks"}),"."]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>d});var o=s(6540);const r={},i=o.createContext(r);function l(e){const n=o.useContext(i);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),o.createElement(i.Provider,{value:n},e.children)}}}]);